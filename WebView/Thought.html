<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>感想</title>
    <link rel="stylesheet" href="./css/Global.css">
    <link rel="stylesheet" href="./css/Thought.css">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
    <div id="ThoughtPage">
        <!-- 导航栏 -->
        <header>
            <ul>
                <li><a href="/WebView/"><i class="el-icon-s-home"></i>主页</a></li>
                <li class="active"><a href="/WebView/Thought.html"><i class="el-icon-s-opportunity"></i>感语</a></li>
                <li><a href="/WebView/Affair.html"><i class="el-icon-s-claim"></i>事务</a></li>
            </ul>
        </header>
        <!-- 页面主体 -->
        <div class="body">
            <!-- 输入块 -->
            <div class="EnterBlock">
                <!-- 短文输入框 -->
                <textarea v-model="writeText" cols="30" rows="6" style="resize:none" placeholder="一个事物也许不止一种看法呢......" ></textarea>
                <div class="EnterTools">
                    <button :class="{active:thoughtEmotion._id != undefined,EnterEmontion:true}" @click="showEmotionList = !showEmotionList">{{thoughtEmotion.name}}</button>
                    <button class="EnterButton" @click="writeThou">记录</button>
                </div>
                <!-- 状态列表(默认隐藏) -->
                <div class="EmotionList" v-show="showEmotionList">
                    <ul>
                        <li v-for="(item,index) in EmotionList"  :class="{active:item._id == thoughtEmotion._id}" :key="index" @click="changeEmotion(item)">{{item.name}}</li>
                    </ul>
                </div>
            </div>
            <!-- 历史列表块 -->
            <ul class="ThougthList">
                <div class="DateLi" v-for="(item,key) in dateList" :key="key">
                    <p class="DateLiTitle">{{item.showName}} <span class="DateThoughtNumber">{{item.thoughtList.length}} 感悟</span></p>
                    <li v-for="(li,key) in item.thoughtList" :key="key">
                        <div class="ThoughtMain">
                            <span class="ThoughtText">{{li.text}}</span>
                            <div class="ThoughtDetails">
                                <span class="ThoughtEmotion" v-if="li.emotion instanceof Object">
                                    {{li.emotion.name}}
                                </span>
                                <span class="thou_time">{{getTimeString(li.date)}}</span>
                            </div>
                        </div>
                        <button class="DestoryThought" @click="destoryThou(li._id)">删除</button>
                    </li>
                </div>
            </ul>
        </div>
        <footer></footer>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.js"></script>
    <script src="./js/ToolsFunction.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="./js/page_thought.js"></script>
    <script src="./js/Class.js"></script>
    <script src="./js/DB.js"></script>
</body>
</html>