(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Sign"],{2159:function(e,t,n){"use strict";n("793a")},"55e2":function(e,t,n){},6584:function(e,t,n){"use strict";n("55e2")},"793a":function(e,t,n){},ab44:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=function(e){return Object(o["pushScopeId"])("data-v-76d49886"),e=e(),Object(o["popScopeId"])(),e},r=c((function(){return Object(o["createElementVNode"])("div",{class:"backgroundLogo"},"DataLife",-1)}));function i(e,t,n,c,i,a){var s=Object(o["resolveComponent"])("SignBlock"),l=Object(o["resolveComponent"])("LoginBlock");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{id:"SignPage",class:Object(o["normalizeClass"])({onSign:i.onSign})},[r,Object(o["createVNode"])(o["Transition"],{name:"appear"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(s,{onChangePage:a.changePage},null,8,["onChangePage"]),[[o["vShow"],i.onSign]])]})),_:1}),Object(o["createVNode"])(o["Transition"],{name:"appear"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(l,{onChangePage:a.changePage},null,8,["onChangePage"]),[[o["vShow"],!i.onSign]])]})),_:1})],2)}var a=n("cf05"),s=n.n(a),l=function(e){return Object(o["pushScopeId"])("data-v-f0e48d88"),e=e(),Object(o["popScopeId"])(),e},d={id:"SignBlock"},u=l((function(){return Object(o["createElementVNode"])("div",{class:"logo"},[Object(o["createElementVNode"])("img",{src:s.a,alt:""})],-1)})),m={class:"Header"},b={class:"Form"},g=l((function(){return Object(o["createElementVNode"])("p",{class:"formErrorHint"}," 请输入有效格式的邮箱地址 ",-1)})),p={class:"FormLine EmailCode"},f={class:"FormLine"},O=l((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),j={class:"FormLine"},h={class:"Footer"},v=Object(o["createTextVNode"])("转去登录");function k(e,t,n,c,r,i){var a=Object(o["resolveComponent"])("el-button"),s=Object(o["resolveComponent"])("Back"),l=Object(o["resolveComponent"])("el-icon");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[u,Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("p",{class:"title",onClick:t[0]||(t[0]=function(e){return i.toLoginPage()})},"注册")]),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])([{FormLine:!0},{error:i.formatEmailError}])},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"email",title:"邮箱地址",placeholder:"邮箱地址","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.SignBlock.email=e})},null,512),[[o["vModelText"],r.SignBlock.email]]),g],2),Object(o["createElementVNode"])("div",p,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",maxlength:"6",title:"邮箱验证码",placeholder:"验证码","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.SignBlock.emailCode=e})},null,512),[[o["vModelText"],r.SignBlock.emailCode]]),Object(o["createVNode"])(a,{type:"primary",onClick:t[3]||(t[3]=function(e){return i.sendEmailCode()}),disabled:r.type.isSendCode},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.type.sendCodeButtonText),1)]})),_:1},8,["disabled"])]),Object(o["createElementVNode"])("div",f,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"password",class:"password",title:"您的密码",placeholder:"您的密码","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.SignBlock.passward=e}),onKeydown:t[5]||(t[5]=Object(o["withKeys"])((function(e){return i.SignUser()}),["enter"]))},null,544),[[o["vModelText"],r.SignBlock.passward]])]),O,Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("input",{type:"button",class:"submit",value:"注册账号",onClick:t[6]||(t[6]=function(e){return i.SignUser()})})])]),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("span",{class:"goLogin",onClick:t[7]||(t[7]=function(e){return i.toLoginPage()})},[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s)]})),_:1}),v])])])}n("498a");var C=n("3ef4"),E=n("c9a1"),S={name:"SignBlock",data:function(){return{type:{isSendCode:!1,sendCodeButtonText:"获取验证码"},SignBlock:{email:"",emailCode:"",passward:""}}},methods:{toLoginPage:function(){this.$emit("changePage",!1)},sendEmailCode:function(){var e=this;if(""==this.SignBlock.email.trim()||this.formatEmailError)Object(C["a"])({showClose:!0,message:"请输入有效的邮箱地址!"});else{this.Work.User.sendEmailCode(this.SignBlock.email),this.type.isSendCode=!0,E["a"].alert("验证码邮件已发送至您的邮箱，请注意查收。","提示",{confirmButtonText:"OK"});var t=0,n=setInterval((function(){e.type.sendCodeButtonText=30-t+"秒后重新获取",t++,t>=30&&(clearInterval(n),e.type.isSendCode=!1,e.type.sendCodeButtonText="获取验证码")}),1e3)}},SignUser:function(){var e=this;this.Work.User.SignUser(this.SignBlock).then((function(t){console.log(t);var n=t.type;"success"==n?(e.$store.state.user=t.user,e.$router.push("affair")):"exist"==n?(Object(C["a"])({showClose:!0,message:"该用户已存在,请直接登录"}),e.toLoginPage()):"error"==n&&Object(C["a"])({showClose:!0,duration:0,message:"未知错误,请直接联系DataLife管理人员!",type:"error"})}),(function(e){"DataError"==e?Object(C["a"])({showClose:!0,message:"邮箱和密码请勿为空",duration:1e3,type:"warning"}):"NetError"==e?Object(C["a"])({showClose:!0,duration:0,message:"服务请求错误,请直接联系DataLife管理人员!",type:"error"}):Object(C["a"])({showClose:!0,duration:0,message:"未知错误,请直接联系DataLife管理人员!",type:"error"})}))},LoginUser:function(){var e=this;this.Work.User.LoginUserGlobal(this.SignBlock).then((function(t){console.log(t),e.$store.state.user=t.user,e.$router.push("affair")}))}},computed:{formatEmailError:function(){if(""==this.SignBlock.email.trim())return!1;var e=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;return!e.test(this.SignBlock.email)}},mounted:function(){document.title="DataLife-用户注册"}},w=(n("e2b5"),n("6b0d")),V=n.n(w);const N=V()(S,[["render",k],["__scopeId","data-v-f0e48d88"]]);var B=N,L=function(e){return Object(o["pushScopeId"])("data-v-3f2b1b75"),e=e(),Object(o["popScopeId"])(),e},y={id:"LoginBlock"},x=L((function(){return Object(o["createElementVNode"])("div",{class:"logo"},[Object(o["createElementVNode"])("img",{src:s.a,alt:""})],-1)})),U={class:"Header"},P={class:"Form"},T={class:"Footer"},D=Object(o["createTextVNode"])("新用户注册");function I(e,t,n,c,r,i){var a=Object(o["resolveComponent"])("Right"),s=Object(o["resolveComponent"])("el-icon");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",y,[x,Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("p",{class:"title",onClick:t[0]||(t[0]=function(e){return i.toSignPage()})},"现在就登录")]),Object(o["createElementVNode"])("div",P,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"email",title:"邮箱地址",placeholder:"邮箱地址","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.LoginBlock.email=e})},null,512),[[o["vModelText"],r.LoginBlock.email]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"password",class:"password",title:"您的密码",placeholder:"您的密码","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.LoginBlock.passward=e}),onKeydown:t[3]||(t[3]=Object(o["withKeys"])((function(e){return i.LoginUser()}),["enter"]))},null,544),[[o["vModelText"],r.LoginBlock.passward]]),Object(o["createElementVNode"])("input",{type:"button",class:"submit",value:"登录账号",onClick:t[4]||(t[4]=function(e){return i.LoginUser(!0)})})]),Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("span",{class:"goLogin",onClick:t[5]||(t[5]=function(e){return i.toSignPage()})},[D,Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a)]})),_:1})])])])}var _={name:"LoginBlock",data:function(){return{LoginBlock:{email:"",passward:""}}},methods:{toSignPage:function(){this.$emit("changePage",!0)},LoginUser:function(){var e=this;this.Work.User.LoginUserGlobal(this.LoginBlock).then((function(t){Object(C["a"])({showClose:!0,message:"欢迎回来!",type:"success"}),e.$store.state.user=t.user,e.$router.push("affair")}))}},mounted:function(){document.title="DataLife-用户登录"}};n("2159");const $=V()(_,[["render",I],["__scopeId","data-v-3f2b1b75"]]);var F=$,z={name:"Sign",components:{SignBlock:B,LoginBlock:F},data:function(){return{nodeError:!1,onSign:!1}},methods:{changePage:function(e){this.onSign=e}},mounted:function(){var e=this;this.Work.User.TestServer().then((function(){e.nodeError=!1}),(function(t){console.log(t),e.nodeError=!0}))}};n("6584");const K=V()(z,[["render",i],["__scopeId","data-v-76d49886"]]);t["default"]=K},bc15:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.d6edd68c.png"},e2b5:function(e,t,n){"use strict";n("bc15")}}]);
//# sourceMappingURL=Sign.c0e25fa8.js.map