(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Manager"],{"3d72":function(e,t,c){"use strict";c("483f")},"483f":function(e,t,c){},"4a82":function(e,t,c){"use strict";c("934b")},"5a75":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const i={id:"AffairPage"},a={class:"PageCore"},n={class:"MyAffairBigBlock"},l={class:"MyAffair"},r={key:0,class:"NullBlockTip"},s=["onClick"],d={class:"AffairContent"},f={class:"AffairIconBlock"},b={class:"AffairIcon"},O={class:"iconBackground","aria-hidden":"true"},j=["xlink:href"],m={class:"icon","aria-hidden":"true"},h=["xlink:href"],u={class:"AffairText"},p={class:"AffairLiName"},E={class:"AffairLiDescribe"},N={class:"AffairTools"},v={class:"AffairEditorButton"};function A(e,t,c,A,k,V){const g=Object(o["resolveComponent"])("FolderOpened"),w=Object(o["resolveComponent"])("el-icon"),C=Object(o["resolveComponent"])("Tools"),B=Object(o["resolveComponent"])("EditorAffair");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",l,[k.AffairList.length<=0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g)]),_:1}),Object(o["createTextVNode"])(" 暂无事务可供管理 ")])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(k.AffairList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t,class:Object(o["normalizeClass"])({AffairLi:!0}),title:"编辑这个事务!",onClick:t=>V.OpenEditorPanel(e)},[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("div",b,[(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",O,[Object(o["createElementVNode"])("use",{"xlink:href":`#icon${e.icon.group}-${e.icon.font_class}`},null,8,j)])),(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",m,[Object(o["createElementVNode"])("use",{"xlink:href":`#icon${e.icon.group}-${e.icon.font_class}`},null,8,h)]))])]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("p",p,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("p",E,Object(o["toDisplayString"])(e.describe),1),Object(o["withDirectives"])(Object(o["createElementVNode"])("span",{class:"AffairLevel"},"Lv."+Object(o["toDisplayString"])(e.record.length),513),[[o["vShow"],e.record.length>0]])]),Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("button",v,[Object(o["createVNode"])(w,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(C)]),_:1})])])])],8,s))),128))])])]),Object(o["createVNode"])(B,{ref:"EditorPanel"},null,512)])}const k={key:0,class:"EditorAffairPanel"},V={class:"PushAlert"},g={class:"icon","aria-hidden":"true"},w=["xlink:href"],C={class:"IconList"},B=["onClick","title"],x={class:"icon","aria-hidden":"true"},L=["xlink:href"],I={class:"groupList"},T={class:"SentenceThum"},P={class:"PushTools"},y={class:"deleteButton"};function _(e,t,c,i,a,n){const l=Object(o["resolveComponent"])("Files"),r=Object(o["resolveComponent"])("el-icon"),s=Object(o["resolveComponent"])("DeleteFilled");return a.showPanel?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k,[Object(o["createElementVNode"])("div",V,[null!=a.activeIcon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:"AffairIcon",onClick:t[0]||(t[0]=e=>a.Editor.showIconList=!a.Editor.showIconList)},[(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",g,[Object(o["createElementVNode"])("use",{"xlink:href":`#icon${a.activeIcon.group}-${a.activeIcon.font_class}`},null,8,w)])),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(a.activeIcon.name),1)])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",C,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.iconListGroup,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"IconLI",key:t,onClick:t=>a.activeIcon=e,title:e.name},[(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",x,[Object(o["createElementVNode"])("use",{"xlink:href":`#icon${e.group}-${e.font_class}`},null,8,L)]))],8,B))),128))],512),[[o["vShow"],a.Editor.showIconList]]),Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({active:1==a.iconGroup}),onClick:t[1]||(t[1]=e=>a.iconGroup=1)},[Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l)]),_:1}),Object(o["createTextVNode"])("绚烂类型")],2),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({active:2==a.iconGroup}),onClick:t[2]||(t[2]=e=>a.iconGroup=2)},[Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l)]),_:1}),Object(o["createTextVNode"])("学术类型")],2)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.Editor.NewAffair.name=e),class:"NewAffairName",placeholder:"事务新名称",title:"名称"},null,512),[[o["vModelText"],a.Editor.NewAffair.name]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.Editor.NewAffair.describe=e),class:"NewAffairDescribe",placeholder:"事务新描述",title:"描述"},null,512),[[o["vModelText"],a.Editor.NewAffair.describe]]),Object(o["createElementVNode"])("p",T,Object(o["toDisplayString"])(e.pushSentence),1),Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("button",{class:"affirm",onClick:t[5]||(t[5]=e=>n.UpdateAffair())},"修改"),Object(o["createElementVNode"])("button",{class:"cancel",onClick:t[6]||(t[6]=e=>n.Close())}," 取消 ")]),Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("button",{title:"警告,删除不可撤销!",onClick:t[7]||(t[7]=e=>n.RemoveAffair())},[Object(o["createVNode"])(r,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s)]),_:1}),Object(o["createTextVNode"])("移除事务及其记录")])])])])):Object(o["createCommentVNode"])("",!0)}var D=c("3ef4"),$={name:"EditorAffair",props:[""],data(){return{iconGroup:1,activeIcon:null,showPanel:!1,TargetAffair:null,Editor:{NewAffair:{name:"",describe:"",icon:""},showIconList:!0},iconList:[]}},methods:{UpdateAffair(){this.Editor.NewAffair.icon=this.activeIcon._id;let e=this.Editor.NewAffair;e.id=this.TargetAffair._id,this.Work.Affair.UpdateAffair(e).then(()=>{this.Close(),this.$parent.getAllAffair(),Object(D["a"])({showClose:!0,message:"修改完成!",type:"success"})}).catch(()=>{Object(D["a"])({showClose:!0,message:"修改错误!",type:"error"})})},RemoveAffair(){confirm("您确定移除该事务及其所有记录吗?\n该操作不可逆!")&&this.Work.Affair.RemoveAffair(this.TargetAffair._id).then(()=>{this.Close(),this.$parent.getAllAffair(),Object(D["a"])({showClose:!0,message:"事务已删除"})})},getAllIcon(){this.axios.get(this.Tool.config.address+"/icon/all").then(e=>{this.iconList=e.data,this.activeIcon=e.data[0]})},Open(e){this.Editor.NewAffair.name=e.name,this.Editor.NewAffair.describe=e.describe,this.Editor.NewAffair.icon=e.icon,this.TargetAffair=e,this.showPanel=!0},Close(){this.showPanel=!1}},mounted(){this.getAllIcon()},computed:{iconListGroup(){return this.iconList.filter(e=>e.group==this.iconGroup)}}},S=(c("3d72"),c("6b0d")),G=c.n(S);const M=G()($,[["render",_],["__scopeId","data-v-2d567f77"]]);var F=M,U={name:"Manager",components:{EditorAffair:F},data(){return{EditorPanelInfo:{showPanel:!1,TargetAffair:null},AffairList:[]}},methods:{OpenEditorPanel(e){this.$refs.EditorPanel.Open(e)},closeEditorPanel(){this.EditorPanelInfo.showPanel=!1},getAllAffair(){this.axios.get(this.Tool.config.address+"/affair/all/"+this.$store.state.user.id).then(e=>{this.AffairList=e.data,this.AffairList.sort((e,t)=>t.record.length-e.record.length)})}},mounted(){this.getAllAffair(),document.title="DataLife-管理事务"}};c("4a82");const z=G()(U,[["render",A],["__scopeId","data-v-f71e12f0"]]);t["default"]=z},"934b":function(e,t,c){}}]);
//# sourceMappingURL=Manager.d557b11f.js.map