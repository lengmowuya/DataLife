(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Sign"],{2159:function(e,t,o){"use strict";o("793a")},"55e2":function(e,t,o){},6584:function(e,t,o){"use strict";o("55e2")},"793a":function(e,t,o){},ab44:function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n=e=>(Object(a["pushScopeId"])("data-v-76d49886"),e=e(),Object(a["popScopeId"])(),e),c=n(()=>Object(a["createElementVNode"])("div",{class:"backgroundLogo"},"DataLife",-1));function s(e,t,o,n,s,i){const r=Object(a["resolveComponent"])("SignBlock"),l=Object(a["resolveComponent"])("LoginBlock");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{id:"SignPage",class:Object(a["normalizeClass"])({onSign:s.onSign})},[c,Object(a["createVNode"])(a["Transition"],{name:"appear"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(r,{onChangePage:i.changePage},null,8,["onChangePage"]),[[a["vShow"],s.onSign]])]),_:1}),Object(a["createVNode"])(a["Transition"],{name:"appear"},{default:Object(a["withCtx"])(()=>[Object(a["withDirectives"])(Object(a["createVNode"])(l,{onChangePage:i.changePage},null,8,["onChangePage"]),[[a["vShow"],!s.onSign]])]),_:1})],2)}var i=o("cf05"),r=o.n(i);const l=e=>(Object(a["pushScopeId"])("data-v-a0ac1646"),e=e(),Object(a["popScopeId"])(),e),d={id:"SignBlock"},m=l(()=>Object(a["createElementVNode"])("div",{class:"logo"},[Object(a["createElementVNode"])("img",{src:r.a,alt:""})],-1)),g={class:"Header"},b={class:"Form"},p=l(()=>Object(a["createElementVNode"])("p",{class:"formErrorHint"}," 请输入有效格式的邮箱地址 ",-1)),u={class:"FormLine EmailCode"},O={class:"FormLine"},j=l(()=>Object(a["createElementVNode"])("br",null,null,-1)),h={class:"FormLine"},v={class:"Footer"};function k(e,t,o,n,c,s){const i=Object(a["resolveComponent"])("el-button"),r=Object(a["resolveComponent"])("Back"),l=Object(a["resolveComponent"])("el-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[m,Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("p",{class:"title",onClick:t[0]||(t[0]=e=>s.toLoginPage())},"注册")]),Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])([{FormLine:!0},{error:s.formatEmailError}])},[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"email",title:"邮箱地址",placeholder:"邮箱地址","onUpdate:modelValue":t[1]||(t[1]=e=>c.SignBlock.email=e)},null,512),[[a["vModelText"],c.SignBlock.email]]),p],2),Object(a["createElementVNode"])("div",u,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",maxlength:"6",title:"邮箱验证码",placeholder:"验证码","onUpdate:modelValue":t[2]||(t[2]=e=>c.SignBlock.emailCode=e)},null,512),[[a["vModelText"],c.SignBlock.emailCode]]),Object(a["createVNode"])(i,{type:"primary",onClick:t[3]||(t[3]=e=>s.sendEmailCode()),disabled:c.type.isSendCode},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.type.sendCodeButtonText),1)]),_:1},8,["disabled"])]),Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"password",class:"password",title:"您的密码",placeholder:"您的密码","onUpdate:modelValue":t[4]||(t[4]=e=>c.SignBlock.passward=e),onKeydown:t[5]||(t[5]=Object(a["withKeys"])(e=>s.SignUser(),["enter"]))},null,544),[[a["vModelText"],c.SignBlock.passward]])]),j,Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("input",{type:"button",class:"submit",value:"注册账号",onClick:t[6]||(t[6]=e=>s.SignUser())})])]),Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("span",{class:"goLogin",onClick:t[7]||(t[7]=e=>s.toLoginPage())},[Object(a["createVNode"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r)]),_:1}),Object(a["createTextVNode"])("转去登录")])])])}o("14d9");var C=o("3ef4"),E=o("c9a1"),S={name:"SignBlock",data(){return{type:{isSendCode:!1,sendCodeButtonText:"获取验证码"},SignBlock:{email:"",emailCode:"",passward:""}}},methods:{toLoginPage(){this.$emit("changePage",!1)},sendEmailCode(){if(""==this.SignBlock.email.trim()||this.formatEmailError)return void Object(C["a"])({showClose:!0,message:"请输入有效的邮箱地址!"});this.Work.User.sendEmailCode(this.SignBlock.email),this.type.isSendCode=!0,E["a"].alert("验证码邮件已发送至您的邮箱，请注意查收。","提示",{confirmButtonText:"OK"});let e=0,t=setInterval(()=>{this.type.sendCodeButtonText=30-e+"秒后重新获取",e++,e>=30&&(clearInterval(t),this.type.isSendCode=!1,this.type.sendCodeButtonText="获取验证码")},1e3)},SignUser(){this.Work.User.SignUser(this.SignBlock).then(e=>{console.log(e);let t=e.type;"success"==t?(this.$store.state.user=e.user,Object(C["a"])({showClose:!0,message:"注册成功,欢迎您!",type:"success"}),this.$router.push("affair")):"exist"==t?(Object(C["a"])({showClose:!0,message:"该用户已存在,请直接登录"}),this.toLoginPage()):"error"==t&&Object(C["a"])({showClose:!0,duration:0,message:"未知错误,请直接联系DataLife管理人员!",type:"error"})},e=>{"DataError"==e?Object(C["a"])({showClose:!0,message:"邮箱和密码请勿为空",duration:1e3,type:"warning"}):"NetError"==e?Object(C["a"])({showClose:!0,duration:0,message:"服务请求错误,请直接联系DataLife管理人员!",type:"error"}):Object(C["a"])({showClose:!0,duration:0,message:"未知错误,请直接联系DataLife管理人员!",type:"error"})})},LoginUser(){this.Work.User.LoginUserGlobal(this.SignBlock).then(e=>{console.log(e),this.$store.state.user=e.user,this.$router.push("affair")})}},computed:{formatEmailError(){if(""==this.SignBlock.email.trim())return!1;let e=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;return!e.test(this.SignBlock.email)}},mounted(){document.title="DataLife-用户注册"}},w=(o("b813"),o("6b0d")),V=o.n(w);const f=V()(S,[["render",k],["__scopeId","data-v-a0ac1646"]]);var N=f;const B=e=>(Object(a["pushScopeId"])("data-v-3f2b1b75"),e=e(),Object(a["popScopeId"])(),e),L={id:"LoginBlock"},y=B(()=>Object(a["createElementVNode"])("div",{class:"logo"},[Object(a["createElementVNode"])("img",{src:r.a,alt:""})],-1)),x={class:"Header"},U={class:"Form"},P={class:"Footer"};function T(e,t,o,n,c,s){const i=Object(a["resolveComponent"])("Right"),r=Object(a["resolveComponent"])("el-icon");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[y,Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("p",{class:"title",onClick:t[0]||(t[0]=e=>s.toSignPage())},"现在就登录")]),Object(a["createElementVNode"])("div",U,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"email",title:"邮箱地址",placeholder:"邮箱地址","onUpdate:modelValue":t[1]||(t[1]=e=>c.LoginBlock.email=e)},null,512),[[a["vModelText"],c.LoginBlock.email]]),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"password",class:"password",title:"您的密码",placeholder:"您的密码","onUpdate:modelValue":t[2]||(t[2]=e=>c.LoginBlock.passward=e),onKeydown:t[3]||(t[3]=Object(a["withKeys"])(e=>s.LoginUser(),["enter"]))},null,544),[[a["vModelText"],c.LoginBlock.passward]]),Object(a["createElementVNode"])("input",{type:"button",class:"submit",value:"登录账号",onClick:t[4]||(t[4]=e=>s.LoginUser(!0))})]),Object(a["createElementVNode"])("div",P,[Object(a["createElementVNode"])("span",{class:"goLogin",onClick:t[5]||(t[5]=e=>s.toSignPage())},[Object(a["createTextVNode"])("新用户注册"),Object(a["createVNode"])(r,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i)]),_:1})])])])}var D={name:"LoginBlock",data(){return{LoginBlock:{email:"",passward:""}}},methods:{toSignPage(){this.$emit("changePage",!0)},LoginUser(){this.Work.User.LoginUserGlobal(this.LoginBlock).then(e=>{Object(C["a"])({showClose:!0,message:"欢迎回来!",type:"success"}),this.$store.state.user=e.user,this.$router.push("affair")})}},mounted(){document.title="DataLife-用户登录"}};o("2159");const I=V()(D,[["render",T],["__scopeId","data-v-3f2b1b75"]]);var _=I,$={name:"Sign",components:{SignBlock:N,LoginBlock:_},data(){return{nodeError:!1,onSign:!1}},methods:{changePage(e){this.onSign=e}},mounted(){this.Work.User.TestServer().then(()=>{this.nodeError=!1},e=>{console.log(e),this.nodeError=!0})}};o("6584");const F=V()($,[["render",s],["__scopeId","data-v-76d49886"]]);t["default"]=F},b813:function(e,t,o){"use strict";o("c643")},c643:function(e,t,o){},cf05:function(e,t,o){e.exports=o.p+"img/logo.d6edd68c.png"}}]);
//# sourceMappingURL=Sign.0bc7144c.js.map