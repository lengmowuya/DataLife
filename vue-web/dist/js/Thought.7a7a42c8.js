(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Thought"],{1850:function(t,e,o){"use strict";o("63c7")},"5a72":function(t,e,o){"use strict";o.r(e);var i=o("7a23");const a={id:"ThoughtPage"},s={class:"Header"},c={class:"EnterBlock"},n={class:"EnterTools"},r={class:"ThougthList"},h={key:0,class:"NullBlockTip"},d={class:"DateLiTitle"},l={class:"CurrentDateList"},m={class:"ThoughtMain"},u={class:"ThoughtDetails"},g={class:"thou_time"},b=["onClick"],j={class:"ThoughtText"};function O(t,e,o,O,T,L){const p=Object(i["resolveComponent"])("EditPen"),E=Object(i["resolveComponent"])("el-icon"),w=Object(i["resolveComponent"])("IceCreamRound");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",a,[Object(i["createElementVNode"])("div",s,[Object(i["createElementVNode"])("div",c,[Object(i["withDirectives"])(Object(i["createElementVNode"])("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>T.writeText=t),cols:"30",rows:"6",style:{resize:"none"},placeholder:"一个事物也许不止一种看法呢......"},null,512),[[i["vModelText"],T.writeText]]),Object(i["createElementVNode"])("div",n,[Object(i["createElementVNode"])("button",{class:"EnterButton",onClick:e[1]||(e[1]=(...t)=>L.writeThou&&L.writeThou(...t))},[Object(i["createVNode"])(E,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(p)]),_:1}),Object(i["createTextVNode"])("记录")])])])]),Object(i["createElementVNode"])("ul",r,[T.List.length<=0?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",h,[Object(i["createVNode"])(E,null,{default:Object(i["withCtx"])(()=>[Object(i["createVNode"])(w)]),_:1}),Object(i["createTextVNode"])(" 给生活来一点记录! ")])):Object(i["createCommentVNode"])("",!0),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(T.dateList,(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"DateLi",key:o},[Object(i["createElementVNode"])("p",d,[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.showName)+" ",1),Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("ul",l,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.thoughtList,(e,o)=>(Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:o,class:"ThougthLi"},[Object(i["createElementVNode"])("div",m,[Object(i["createElementVNode"])("div",u,[Object(i["createElementVNode"])("span",g,Object(i["toDisplayString"])(t.Tool.getTimeString(e.date)),1),Object(i["createElementVNode"])("span",{onClick:t=>L.destoryThou(e._id),class:"DestoryThought"},"删除",8,b)]),Object(i["createElementVNode"])("pre",j,Object(i["toDisplayString"])(e.text),1)])]))),128))])]))),128))])])}o("14d9");var T=o("3ef4"),L={name:"Thought",data(){return{List:[],writeText:"",careerTextLength:0,dateList:[],EmotionList:[],thoughtEmotion:{name:"状态",_id:null},showEmotionList:!1,date:{}}},methods:{updateCareerTextLength(){let t=0;this.List.forEach(e=>{t+=e.text.length}),this.careerTextLength=t},writeThou(){let t={text:this.writeText,emotion:this.thoughtEmotion._id,owner:this.$store.state.user.id};if(""==this.writeText.trim())return void alert("记录内容不能为空");let e=this;this.axios.post(this.Tool.config.address+"/thought/add",t).then(()=>{e.updateDate(),Object(T["a"])({showClose:!0,message:"记录成功!",type:"success"}),this.writeText=""})},destoryThou(t){if(!confirm("确定删除该短语吗?"))return;let e={_id:t},o=this;this.axios.post(this.Tool.config.address+"/thought/remove",e).then(()=>{Object(T["a"])({showClose:!0,message:"已删除该短语"}),o.updateDate()})},changeEmotion(t){this.thoughtEmotion=t},setThoughtList(){this.List.forEach(t=>{t.date=this.Tool.FormatDate(t.time),t.dateString=this.Tool.getDateString(t.date),t.timeSort=12*t.date.year*31+31*t.date.month+t.date.day})},initDateList(){this.dateList=[],this.List.forEach(t=>{if(0==this.dateList.length)this.dateList.push({dateString:t.dateString,timeSort:t.timeSort,date:t.date,thoughtList:[t]});else{let e=!1;for(let o=0;o<this.dateList.length;o++)if(this.dateList[o].dateString==t.dateString){e=!0,this.dateList[o].thoughtList.push(t);break}e||this.dateList.push({dateString:t.dateString,timeSort:t.timeSort,date:t.date,thoughtList:[t]})}}),this.dateList.sort((t,e)=>e.timeSort-t.timeSort);let t=this;this.dateList.forEach(e=>{let o=t.date.year,i=e.date.year,a=t.date.month,s=e.date.month,c=t.date.day,n=e.date.day;e.showName=e.dateString,o==i&&(e.showName=s+"-"+n),o==i&&a==s&&c==n&&(e.showName="今天"),o==i&&a==s&&c==n+1&&(e.showName="昨天"),o==i&&a==s&&c==n+2&&(e.showName="前天")})},updateDate(){this.date=this.Tool.FormatDate((new Date).getTime()),this.axios.get(this.Tool.config.address+"/thought/all/"+this.$store.state.user.id).then(t=>{this.List=t.data,this.setThoughtList(),this.initDateList(),this.updateCareerTextLength()}),this.axios.get(this.Tool.config.address+"/emotion/all").then(t=>{this.EmotionList=t.data})}},mounted(){this.updateDate(),document.title="DataLife-想法短语"}},p=(o("1850"),o("6b0d")),E=o.n(p);const w=E()(L,[["render",O],["__scopeId","data-v-46d852a8"]]);e["default"]=w},"63c7":function(t,e,o){}}]);
//# sourceMappingURL=Thought.7a7a42c8.js.map